#!/bin/sh
#
# Reload jail <jailname> or all
# Usage: reload <jailname>|all
#

LIBDIR="$(dirname $0)" && . "${LIBDIR}/config"

jail="${1:-}"
if [ ! -n "${jail}" ]; then
    "${LIBDIR}/bkctld-help" && exit 1
fi
[ -d "${CONFDIR}/${jail}" ] || error "${jail} : trying to reload inexistant jail"
"${LIBDIR}/bkctld-is-on" "${jail}" || exit 0

pid=$(cat "${RUNDIR}/${jail}/sshd.pid")

kill -HUP "${pid}" && notice "${jail} was reloaded [${pid}]"
